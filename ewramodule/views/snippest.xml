<?xml version='1.0' encoding='utf-8'?>
<odoo>

    <template id="ewra_complaint_form" name="ewra Complains">
        <section class="complain">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 complainform">
                        <br />
                        <div class="card card-primary">
                            <div class="card-header ">
                                <h3 class="card-title">شكوي جديده</h3>
                            </div>
                            <!-- <form method="post" action="/ewra-helpdesk/submit" role="form"
                                class="js_accept_json js_website_submit_form new_helpdesk_form"
                                id="helpdesk_form"> -->
                                <form id="complainform" class="complainform" method="post" action="/ewra-helpdesk/submit">
                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()" />
                            <div class="card-body align-center">
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-12">
                                            <p>
                                                حتى يقوم الجهاز بمباشرة مهامه نحو دراسة الشكوى , فيشترط:
                                                <br />
                                                1-أن يكون قد رفع شكواه إلى الشركة المختصة و لم يجد لها حلاً.
                                                <br />
                                                2- فى حالة الشكاوى المتعلقة بالفواتير والعدادات يجب إرفاق صورة فاتورة المياه أو إدخال رقم الحساب (اشتراك - منطقة)
                                            </p>
                                        </div>

                                        <div class="col-12">
                                            <b> بيانات مقدم الشكوى</b>
                                        </div>
                                        <div class="col-12">

                                            <div class="row">
                                                <div class="col-md-6 col-lg-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                إسم الشاكى
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <input 
                                                                required="1"
                                                                  id="complainer" name="complainer" type="text" class="form-control" />
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="col-md-6 col-lg-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                الرقم القومى
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <input required="1" id="complainer_id" name="complainer_id" type="text" class="form-control" />
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>

                                            </div>


                                            <div class="row">
                                                <div class="col-md-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                المحافظة
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <select required="1" name="governate" id="governate" class="form-control">
                                                                   
                                                                </select>
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="col-md-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                قسم/ قرية/ مركز
                                                                <!-- <span style="color:red">*</span> -->
                                                            </span>
                                                            <div class="input-group">
                                                                <input  name="city" id="city" type="text" class="form-control" />
                                                            </div>

                                                        </label>
                                                    </div>

                                                </div>

                                            </div>


                                            <div class="row">

                                                <div class="col-md-12 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                عنوان الشاكى
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <input required="1" id="adress" name="adress" type="text" class="form-control" />
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>

                                            </div>


                                            <div class="row">


                                                <div class="col-md-6 col-lg-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                تليفون العميل
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <input required="1" id="tele" name="tele" type="text" class="form-control" />
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>


                                                <div class="col-md-6 col-lg-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                البريد الإلكتروني
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <input required="1" id="email" name="email" type="email" class="form-control" />
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>


                                            </div>
                                            <div class="col-12">
                                                <b> بيانات الشكوى
                                            </b>
                                            <hr/>
                                            </div>


                                            <div class="row">
                                                <div class="col-md-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                نوع الشكوى
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <select required="1" name="complain_class" id="complain_class" class="complain_class form-control">
                                                                   
                                                                </select>
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="col-md-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                سبب الشكوي
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <select required="1" name="complain_type" id="complain_type" class="form-control">
                                                                    
                                                                </select>
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>

                                            </div>


                                            <div class="row">
                                                <div class="col-md-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                الجهة المسئولة
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <select required="1" name="responsable" id="responsable" class="form-control">
                                                             
                                                                </select>
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="col-md-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                مقدم الخدمة
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <select required="1" name="introducer" id="introducer" class="form-control">
                                                                
                                                                </select>
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="col-12 needsubscription" style="display:none" >
                                                <b>فى حالة الشكاوى التجارية وشكاوى الفواتير

                                                </b>
                                                <hr/>
                                            </div>


                                            <div class="row needsubscription" style="display:none">
                                                <div class="col-md-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                رقم الاشتراك
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <input  id="Subscription_id" name="Subscription_id" type="text" class="form-control" />
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>

                                                <div class="col-md-6 col-sm-10">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                رقم المنطقة
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <input  id="origin_num" name="origin_num" type="text" class="form-control" />
                                                            </div>

                                                        </label>
                                                    </div>

                                                </div>

                                            </div>

                                            <div class="col-12">
                                                <b>
                                                    <label>
                                                    <input type="checkbox" id="checkpreviouscomplains" name="checkpreviouscomplains" value="1" />
                                                    إبلاغ مقدم الخدمة
                                                </label>

                                                </b>
                                                
                                            </div>


                                            

                                                <div class="row" id="divcheckpreviouscomplains" style="display:none">
                                                    <hr/>
                                                    <div class="col-md-6 col-sm-10" style="display:none">
                                                        <div class="form-group">
                                                            <label class="col-md-12 col-form-label" for="partner_id">
                                                                <span class="label_right">
                                                                    وسيلة الإبلاغ
                                                                    <span style="color:red">*</span>
                                                                </span>
                                                                <div class="input-group">
                                                                    <select  name="reportingway" id="reportingway" class="form-control">
                                                                        
                                                                    </select>
                                                                </div>

                                                            </label>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6 col-sm-10">
                                                        <div class="form-group">
                                                            <label class="col-md-12 col-form-label" for="partner_id">
                                                                <span class="label_right">
                                                                    كود الشكوى
                                                                    <span style="color:red">*</span>
                                                                </span>
                                                                <div class="input-group">
                                                                    <input  id="reporting_id" name="reporting_id" type="text" class="form-control" />
                                                                </div>

                                                            </label>
                                                        </div>                                                       

                                                    </div>

                                                    <div class="col-md-6 col-sm-10">
                                                        <div class="form-group">
                                                            <label class="col-md-12 col-form-label" for="partner_id">
                                                                <span class="label_right">
                                                                    تاريخ الإبلاغ
                                                                    <span style="color:red">*</span>
                                                                </span>
                                                                <div class="input-group">
                                                                    <input  id="reportdate" name="reportdate"  class="form-control" type="date"/>
                                                                </div>

                                                            </label>
                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="row">
                                                    

                                                    <div class="col-md-6 col-sm-10" style="display:none">
                                                        <div class="form-group">
                                                            <label class="col-md-12 col-form-label" for="partner_id">
                                                                <span class="label_right">
                                                                    تاريخ رد الشركة
                                                                    <span style="color:red">*</span>
                                                                </span>
                                                                <div class="input-group">
                                                                    <input  id="replay_date" name="replay_date" type="date" class="form-control" />
                                                                </div>

                                                            </label>
                                                        </div>

                                                    </div>

                                                    <div class="col-md-12 col-sm-10" style="display:none">
                                                        <div class="form-group">
                                                            <label class="col-md-12 col-form-label" for="partner_id">
                                                                <span class="label_right">
                                                                    رد مقدم الخدمة
                                                                    <span style="color:red">*</span>
                                                                </span>
                                                                <div class="input-group">
                                                                    <input  id="replay" name="replay" type="text" class="form-control" />
                                                                </div>

                                                            </label>
                                                        </div>

                                                    </div>


                                                </div>


                                            









                                            
                                            
                                            <div class="row">
                                                <div class="col-12">
                                                    <div class="form-group">
                                                        <label class="col-md-12 col-form-label" for="partner_id">
                                                            <span class="label_right">
                                                                بيانات تفصيلية عن الشكوى تملاء عن طريق الشاكى
                                                                <span style="color:red">*</span>
                                                            </span>
                                                            <div class="input-group">
                                                                <textarea id="details" name="details" class="form-control" />
                                                            </div>

                                                        </label>
                                                    </div>
                                                </div>
                                                

                                            </div>


                                            <!-- end fom -->

                                        </div>
                                    </div>
                                </div>
                            </div>
  </form>
                            <div class="card-footer">
                                <button id="sendhelpdesk" name="sendhelpdesk" class="btn btn-primary helpdesk_send" form="complainform" type='submit'>ارسال</button>
                            </div>
                        
                        </div>

                  
                        <!-- </form> -->
                    </div>
                </div>
            </div>
            <br />

        </section>
    </template>

    <template id="placeof_inqueries" name="ewra Enqueries" inherit_id="website.snippets">

        <xpath expr="//div[@id='snippet_feature']//t[@t-snippet][last()]" position="after">
            <t t-snippet="ewramodule.ewra_complaint_form"
                t-thumbnail="/ewramodule/static/src/img/ui/snippet_thumb.png" />
        </xpath>

    </template>




    <!-- Create Template for search complaint from portal -->

    <template id="ewra_complaint_search" name="Complaint Search">
        
        <section class="row">
            <div class="container" >
            <div class="col-lg-8 offset-lg-2 o_colored_level col-md-8 offset-md-2 col-sm-12">
                <h1>البحث عن شكوي</h1>
                <p>
                    يمكنك البحث عن شكاوي باستخدام رقم الشكوي او الرقم القومي
                </p>
                <form class="o_searchbar_form s_searchbar_input" action="/searchcomplaint">
                    <div class="input-group" role="search" >
                  <input type="search"  id="complaintid" name="complaintid" required='1' class="search-query form-control oe_search_box None" placeholder="Search..." data-search-type="all" data-limit="5" data-display-image="true" data-display-description="true" data-display-extra-link="true" data-display-detail="true" data-order-by="name asc" autocomplete="off" />
                    <div class="input-group-append">
                      <button type="submit" aria-label="Search" title="Search" class="btn oe_search_button btn-primary">
                        <i class="fa fa-search"></i>
                      </button>
                    </div>
                </div>
                </form>
            </div>
        </div>
        </section>
    </template>

    <template id="place_for_complaint_search" name="Complaint Search" inherit_id="website.snippets">
        <xpath expr="//div[@id='snippet_feature']//t[@t-snippet][last()]" position="after">
            <t t-snippet="ewramodule.ewra_complaint_search"
                t-thumbnail="/ewramodule/static/src/img/ui/snippet_thumb.png" />
        </xpath>
    </template>

<!-- Ewra Search result -->


<template id="ewrasearchresult" name="Complaint Search Result">
    <t t-call="portal.portal_layout" lang="ar_001">
    <div class="Row">
        <div class="col-12">
            عدد الشكاوي
            <t t-esc="len(complaints.ids)"/>
        </div>
       <t t-if="complaints">
        
        <div class="accordion" id="accordionExample">
            <t t-foreach="complaints" t-as="complain">
                
            
            <div class="card">
              <div class="card-header" t-attf-id="#{complain.id}h">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse"  t-attf-data-target="##{complain.id}" aria-expanded="true" t-attf-aria-controls="#{complain.id}" >
                    شكوي بتاريخ : <t t-esc="complain.create_date.date()"/>
                  </button>
                </h2>
              </div>
          
              <div  t-attf-id="#{complain.id}"  class="collapse show" t-attf-aria-labelledby="#{complain.id}h" data-parent="#accordionExample">
                <div class="card-body">

                    <blockquote class="blockquote">
                        <p class="mb-0"><t t-esc="complain.description"/>.</p>
                        <footer class="blockquote-footer"> <cite title="Source Title">تفاصيل الشكوي</cite></footer>
                      </blockquote>


                    <t t-if="complain.providerresponse">
                        

                          <blockquote class="blockquote">
                            <p class="mb-0"><t t-esc="complain.providerresponse"/>.</p>
                            <footer class="blockquote-footer"><cite title="Source Title">رد الشكوي</cite></footer>
                          </blockquote>

                        <t t-esc="complain.providerresponse"/>
                    </t>
                    
                    <t t-else="">
                        لم يتم الرد علي  هذه الشكوي بعد
                    </t>
                    
                </div>
              </div>
            </div>
        </t>
            <!-- <div class="card">
              <div class="card-header" id="headingTwo">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Collapsible Group Item #2
                  </button>
                </h2>
              </div>
              <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                <div class="card-body">
                  Some placeholder content for the second accordion panel. This panel is hidden by default.
                </div>
              </div>
            </div>
            <div class="card">
              <div class="card-header" id="headingThree">
                <h2 class="mb-0">
                  <button class="btn btn-link btn-block text-left collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Collapsible Group Item #3
                  </button>
                </h2>
              </div>
              <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                <div class="card-body">
                  And lastly, the placeholder content for the third and final accordion panel. This panel is hidden by default.
                </div>
              </div> 
            </div>-->
          </div>
       </t>
       
       <t t-else="">
        in else
       </t>
    </div>
    </t>
</template>


</odoo>